<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <changeSet  author="kovalenko-dmytro"  id="1">
        <createTable  tableName="test_types">
            <column  name="test_type_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="test_type_name"  type="VARCHAR(50)">
                <constraints  nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kovalenko-dmytro" id="2">
        <insert tableName="test_types">
            <column name="test_type_id" value="1"/>
            <column name="test_type_name" value="${test.type.b}"/>
        </insert>
        <insert tableName="test_types">
            <column name="test_type_id" value="2"/>
            <column name="test_type_name" value="${test.type.s}"/>
        </insert>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="3">
        <createTable  tableName="test_results">
            <column  name="test_result_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="user_name"  type="VARCHAR(150)">
                <constraints  nullable="false"/>
            </column>
            <column  name="task_name"  type="VARCHAR(100)">
                <constraints  nullable="false"/>
            </column>
            <column  name="dialect_pair"  type="VARCHAR">
                <constraints  nullable="false"/>
            </column>
            <column  name="created"  type="TIMESTAMP">
                <constraints  nullable="false"/>
            </column>
            <column  name="is_applied"  type="BOOLEAN" defaultValue="false">
                <constraints  nullable="false"/>
            </column>
            <column  name="test_type_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_test_results_test_types" references="test_types(test_type_id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="4">
        <createTable  tableName="collected_statistics">
            <column  name="collected_statistic_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="version"  type="VARCHAR(20)">
                <constraints  nullable="false"/>
            </column>
            <column  name="dialect_pair"  type="VARCHAR">
                <constraints  nullable="false"/>
            </column>
            <column  name="source_connection"  type="VARCHAR">
                <constraints  nullable="false"/>
            </column>
            <column  name="target_connection"  type="VARCHAR">
                <constraints  nullable="false"/>
            </column>
            <column  name="gc_memory"  type="VARCHAR(30)">
                <constraints  nullable="false"/>
            </column>
            <column  name="tree_validator_state"  type="VARCHAR(10)">
                <constraints  nullable="false"/>
            </column>
            <column  name="all_obj_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="transformed_obj_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="applied_obj_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="transformed_from_error_report_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="npe_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="project_size"  type="VARCHAR(30)">
                <constraints  nullable="false"/>
            </column>
            <column  name="target_size"  type="VARCHAR(30)">
                <constraints  nullable="false"/>
            </column>
            <column  name="source_size"  type="VARCHAR(30)">
                <constraints  nullable="false"/>
            </column>
            <column  name="test_result_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_collected_statistics_test_results" references="test_results(test_result_id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="5">
        <createTable  tableName="time_info_types">
            <column  name="time_info_type_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="time_info_type_name"  type="VARCHAR(100)">
                <constraints  nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kovalenko-dmytro" id="6">
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="1"/>
            <column name="time_info_type_name" value="${time.info.type.tot}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="2"/>
            <column name="time_info_type_name" value="${time.info.type.lt}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="3"/>
            <column name="time_info_type_name" value="${time.info.type.ct}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="4"/>
            <column name="time_info_type_name" value="${time.info.type.at}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="5"/>
            <column name="time_info_type_name" value="${time.info.type.st}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="6"/>
            <column name="time_info_type_name" value="${time.info.type.twlt}"/>
        </insert>
        <insert tableName="time_info_types">
            <column name="time_info_type_id" value="7"/>
            <column name="time_info_type_name" value="${time.info.type.tt}"/>
        </insert>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="7">
        <createTable  tableName="time_info">
            <column  name="time_info_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="time_value"  type="VARCHAR(100)">
                <constraints  nullable="false"/>
            </column>
            <column  name="time_info_type_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_time_info_time_info_types" references="time_info_types(time_info_type_id)"/>
            </column>
            <column  name="collected_statistic_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_time_info_collected_statistics" references="collected_statistics(collected_statistic_id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="8">
        <createTable  tableName="action_item_counts">
            <column  name="ai_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="ai_name"  type="VARCHAR(30)">
                <constraints  nullable="false"/>
            </column>
            <column  name="ai_count"  type="INTEGER">
                <constraints  nullable="false"/>
            </column>
            <column  name="collected_statistic_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_action_item_counts_collected_statistics" references="collected_statistics(collected_statistic_id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet  author="kovalenko-dmytro"  id="9">
        <createTable  tableName="statistic_reports">
            <column  name="report_id"  type="BIGSERIAL">
                <constraints  nullable="false"  primaryKey="true"/>
            </column>
            <column  name="report_name"  type="VARCHAR">
                <constraints  nullable="false"/>
            </column>
            <column  name="test_type_id"  type="BIGSERIAL">
                <constraints  nullable="false" foreignKeyName="fk_statistic_reports_test_types" references="test_types(test_type_id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kovalenko-dmytro" id="10">
        <insert tableName="statistic_reports">
            <column name="report_id" value="1"/>
            <column name="report_name" value="${report.template.name.ai}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="2"/>
            <column name="report_name" value="${report.template.name.a}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="3"/>
            <column name="report_name" value="${report.template.name.cs}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="4"/>
            <column name="report_name" value="${report.template.name.e}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="5"/>
            <column name="report_name" value="${report.template.name.ea}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="6"/>
            <column name="report_name" value="${report.template.name.tsoc}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="7"/>
            <column name="report_name" value="${report.template.name.ttoc}"/>
            <column name="test_type_id" value="1"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="8"/>
            <column name="report_name" value="${report.template.name.tv}"/>
            <column name="test_type_id" value="1"/>
        </insert>
    </changeSet>
    <changeSet author="kovalenko-dmytro" id="11">
        <insert tableName="statistic_reports">
            <column name="report_id" value="9"/>
            <column name="report_name" value="${report.template.name.ai}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="10"/>
            <column name="report_name" value="${report.template.name.a}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="11"/>
            <column name="report_name" value="${report.template.name.cs}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="12"/>
            <column name="report_name" value="${report.template.name.e}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="13"/>
            <column name="report_name" value="${report.template.name.ea}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="14"/>
            <column name="report_name" value="${report.template.name.tsoc}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="15"/>
            <column name="report_name" value="${report.template.name.ttoc}"/>
            <column name="test_type_id" value="2"/>
        </insert>
        <insert tableName="statistic_reports">
            <column name="report_id" value="16"/>
            <column name="report_name" value="${report.template.name.tv}"/>
            <column name="test_type_id" value="2"/>
        </insert>
    </changeSet>

</databaseChangeLog>